(this.webpackJsonpboxoffice=this.webpackJsonpboxoffice||[]).push([[0],{57:function(e,n,t){e.exports=t(93)},62:function(e,n,t){},90:function(e,n,t){},92:function(e,n,t){},93:function(e,n,t){"use strict";t.r(n);var o=t(0),r=t.n(o),a=t(21),c=t.n(a),i=(t(62),t(3)),l=t(17),s=t(6),u=t(4);function d(){var e=Object(i.a)(["\n  border-top: 1px solid #d9d9d9;\n  :last-child {\n    border-bottom: 1px solid #d9d9d9;\n  }\n  padding: 20px 0 20px 20px;\n"]);return d=function(){return e},e}function p(){var e=Object(i.a)(["\n  list-style: none;\n"]);return p=function(){return e},e}function m(){var e=Object(i.a)(["\n  width: 80px;\n"]);return m=function(){return e},e}function f(){var e=Object(i.a)(["\n  flex: 1;\n"]);return f=function(){return e},e}function g(){var e=Object(i.a)(["\n  display: flex;\n  height: 80px;\n"]);return g=function(){return e},e}function v(){var e=Object(i.a)(["\n  padding: 50px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-content: center;\n  width: 850px;\n"]);return v=function(){return e},e}function b(){var e=Object(i.a)(["\n  /* grid-column: 1/3; */\n  grid-area: plotContent;\n"]);return b=function(){return e},e}function h(){var e=Object(i.a)(["\n  /* grid-column: 1/3; */\n  grid-area: plot;\n"]);return h=function(){return e},e}function E(){var e=Object(i.a)(["\n  display: table;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  list-style: none;\n  border-top: 1px solid #d9d9d9;\n  border-bottom: 1px solid #d9d9d9;\n  padding-left: 0;\n  grid-area: ul;\n"]);return E=function(){return e},e}function O(){var e=Object(i.a)(["\n  grid-area: title;\n"]);return O=function(){return e},e}function w(){var e=Object(i.a)(["\n  grid-area: img;\n  /* grid-row: 1/3; */\n"]);return w=function(){return e},e}function y(){var e=Object(i.a)(['\n  box-sizing: border-box;\n  width: 1000px;\n  display: grid;\n  justify-content: center;\n  align-content: center;\n  align-items: center;\n  grid-template-columns: 230px 1fr;\n  grid-template-rows: repeat(4, fit-content(100%));\n  grid-template-areas:\n    "img title"\n    "img ul"\n    "plot plot"\n    "plotContent plotContent";\n']);return y=function(){return e},e}function x(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return x=function(){return e},e}var j=u.b.div(x()),k=u.b.div(y()),S=u.b.img(w()),C=u.b.h2(O()),I=u.b.ul(E()),L=u.b.h3(h()),N=u.b.p(b()),_=u.b.div(v()),T=u.b.div(g()),M=u.b.textarea(f()),D=u.b.button(m()),R=u.b.ul(p()),G=u.b.li(d()),P=function(e){var n=e.movie,t=e.isLogin,o=e.comment,a=e.onChange,c=e.onClick;return console.log("components/Movie"),r.a.createElement(j,null,r.a.createElement(k,null,r.a.createElement(S,{src:n.poster,alt:n.title}),r.a.createElement(C,null,n.title),r.a.createElement(I,null,r.a.createElement("li",null,"\uac1c\ubd09\uc77c : ",n.openDt),r.a.createElement("li",null,"\uc7a5\ub974 : ",n.genre," / ",n.runtime,"\ubd84"),r.a.createElement("li",null,"\ub4f1\uae09 : ",n.grade),r.a.createElement("li",null,"\uac10\ub3c5 : ",n.director),r.a.createElement("li",null,"\ubc30\uc6b0 : ",n.actors[0],", ",n.actors[1])),r.a.createElement(L,null,"\uc904\uac70\ub9ac"),r.a.createElement(N,null,n.plot)),r.a.createElement(_,null,r.a.createElement(T,null,r.a.createElement(M,{onChange:a,placeholder:t?"\uc601\ud654 \ub9ac\ubdf0\ub97c \uc791\uc131\ud574 \uc8fc\uc138\uc694.":"\ub85c\uadf8\uc778 \ud6c4 \uc774\uc6a9\uac00\ub2a5\ud55c \uc11c\ube44\uc2a4\uc785\ub2c8\ub2e4.",readOnly:!t}),r.a.createElement(D,{onClick:c},"\uc785\ub825")),r.a.createElement(R,null,o.map((function(e,n){return r.a.createElement(G,{key:n},r.a.createElement("p",null," ",e.text))})))))},B=t(47),A=t(5),Y=t.n(A),K=t(14),F=t(29),V=t.n(F),U=t(22),z=t.n(U),H=t(30),W=t.n(H);t(85),t(87);W.a.initializeApp({apiKey:"AIzaSyAmkavb2eiHUtQR2sBbL1AQTi2b0hTe_-A",authDomain:"boxoffice-app.firebaseapp.com",databaseURL:"https://boxoffice-app.firebaseio.com",projectId:"boxoffice-app",storageBucket:"boxoffice-app.appspot.com",messagingSenderId:"822311017221",appId:"1:822311017221:web:ff63afb6e105975e53356c",measurementId:"G-HYK51T2ZCN"});var q=W.a.firestore();function J(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function Q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?J(t,!0).forEach((function(n){Object(B.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):J(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var X="SET_HEADER_VISIBILITY",Z="SET_LOGIN",$="SET_LOGIN_SUCCESS",ee="SET_LOGIN_ERROR",ne="SET_LOGOUT",te="GET_MOVIES",oe="GET_MOVIES_SUCCESS",re="GET_MOVIES_ERROR",ae="GET_MOVIE",ce="GET_MOVIE_SUCCESS",ie="GET_MOVIE_ERROR",le="GET_COMMENT_SUCCESS",se="GET_COMMENT_ERROR",ue=function(){return function(e,n,t){t.history.push("/")}},de=function(e){return function(){var n=Object(K.a)(Y.a.mark((function n(t){return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("modules/setHeaderVisibility"),t({type:X,visible:e});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},pe=function(e,n){return function(){var t=Object(K.a)(Y.a.mark((function t(o){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("modules/setLogin");try{q.collection("users").where("id","==",n).get().then((function(t){t.empty&&q.collection("users").doc().set({provider:e,id:n},{merge:!0})})),o({type:$,id:n,provider:e})}catch(r){o({type:ee})}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},me=function(){return function(){var e=Object(K.a)(Y.a.mark((function e(n){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("modules/setLogout"),n({type:ne});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},fe=function(e){return function(){var n=Object(K.a)(Y.a.mark((function n(t){var o,r,a;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("///////////setMovies///////////////"),n.next=3,V.a.get("http://www.kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json",{params:{key:"8512edd89b714bf2cf35fcb50adac48d",targetDt:e}});case 3:o=n.sent,r=o.data.boxOfficeResult.dailyBoxOfficeList,a=function(){var n=Object(K.a)(Y.a.mark((function n(){var t,o;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log(r),t=Y.a.mark((function n(t){return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,V.a.get("http://api.koreafilm.or.kr/openapi-data2/wisenut/search_api/search_json.jsp",{params:{ServiceKey:"JIB0YUBGVC07GLD5WFBD",collection:"kmdb_new",title:r[t].movieNm,releaseDts:r[t].openDt.replace(/-/gi,"")}}).then((function(n){var o=n.data.Data[0];if(!o.hasOwnProperty("Result"))return r[t];var a=o.Result[0];console.log(a),a.posters.includes("|")&&(a.posters=a.posters.substring(0,a.posters.indexOf("|"))),q.collection("movies").doc(e.toString()).collection("movieList").doc(r[t].rank).set({rank:parseInt(r[t].rank),title:r[t].movieNm,poster:a.posters,openDt:z()(r[t].openDt).format("YYYY\ub144 M\uc6d4 D\uc77c"),grade:a.rating[0].ratingGrade,genre:a.genre,runtime:a.runtime,director:a.director[0].directorNm,actors:[a.actor[0].actorNm,a.actor[1].actorNm],plot:a.plot},{merge:!0})}));case 2:case"end":return n.stop()}}),n)})),o=0;case 3:if(!(o<r.length)){n.next=8;break}return n.delegateYield(t(o),"t0",5);case 5:o++,n.next=3;break;case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Promise.all([r,a()]).then((function(){console.log("\ud504\ub85c\ubbf8\uc2a4 \ud655\uc778"),t(ge(e))}));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ge=function(e){return function(){var n=Object(K.a)(Y.a.mark((function n(t){return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("modules/getMovies"),""===e&&(e=z()().format("YYYYMMDD")-1),t({type:te}),q.collection("movies").doc(e.toString()).collection("movieList").orderBy("rank","asc").get().then((function(n){if(n.empty)t(fe(e));else{var o=[];n.forEach((function(e){var n=e.data();o.push(n)})),t({type:oe,payload:o,date:e})}}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ve=function(e){return function(){var n=Object(K.a)(Y.a.mark((function n(t){return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("modules/getMovie"),t({type:ae});try{t({type:ce,rank:e})}catch(o){t({type:ie,error:o})}case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},be=function(e,n){return function(){var t=Object(K.a)(Y.a.mark((function t(o){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("getComment");try{q.collection("movies").doc(e.toString()).collection("movieList").where("rank","==",n).get().then((function(e){e.forEach((function(e){if(void 0!==e.data().comment){var n=e.data().comment;o({type:le,payload:n})}}))}))}catch(r){o({type:se,error:r})}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},he=function(e,n,t){return function(){var o=Object(K.a)(Y.a.mark((function o(r){return Y.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:try{q.collection("movies").doc(t.toString()).collection("movieList").doc(n.toString()).set({comment:e},{merge:!0}),r(be(t,n))}catch(a){r({type:se,error:a})}case 1:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()},Ee={visible:!0,login:{status:!1,id:null,provider:null},movies:{loading:!1,data:null,error:null,date:null},movie:{loading:!1,data:null,error:null},comment:[]};var Oe=function(e){var n=e.rank,t=Object(s.c)((function(e){return e.movies.movies})).date,a=Object(s.c)((function(e){return e.movies.movie})),c=a.data,i=a.loading,l=a.error,u=Object(s.c)((function(e){return e.movies.login})),d=u.status,p=u.id,m=Object(s.c)((function(e){return e.movies})).comment,f=Object(s.b)();Object(o.useEffect)((function(){f(ve(n)),f(be(t,n))}),[f,t,n]);var g=null,v=[];return i&&!c?r.a.createElement("div",null,"\ub85c\ub529\uc911..."):l?r.a.createElement("div",null,"\uc5d0\ub7ec \ubc1c\uc0dd"):c?r.a.createElement(P,{movie:c,isLogin:d,writer:p,comment:m,onChange:function(e){console.log("handleChange"),g=e.target.value},onClick:function(e){console.log("handleClick"),d?((v=m).push({text:g,writer:p}),f(he(v,n,t,p))):alert("\ub85c\uadf8\uc778 \ud574\uc8fc\uc138\uc694.")}}):r.a.createElement("div",null,"\ub370\uc774\ud130 \uc5c6\uc74c")};var we=function(e){var n=e.match;console.log("pages/MoviePage");var t=n.params.rank;return console.log(n),r.a.createElement(Oe,{rank:parseInt(t)})},ye=t(12),xe=(t(90),t(54));var je=function(e){var n=e.onChange,t=e.onClick,o=e.movies;return e.date,console.log("components/MovieList"),r.a.createElement("div",{className:"contents"},r.a.createElement("div",{className:"search"},r.a.createElement("input",{className:"inputData",placeholder:"yyyymmdd",onChange:n}),r.a.createElement("button",{className:"button",onClick:t},r.a.createElement(xe.a,null))),r.a.createElement("div",{className:"movies"},o.map((function(e){return r.a.createElement("div",{className:"movie",key:e.rank},r.a.createElement("h1",{className:"rank"},e.rank),r.a.createElement(ye.a,{to:"/".concat(e.rank)},r.a.createElement("img",{className:"poster",src:e.poster,alt:e.title})),r.a.createElement("span",{className:"title"},e.title))}))))};var ke=function(){console.log("MovieListContainer");var e=Object(s.c)((function(e){return e.movies.movies})),n=e.data,t=e.loading,a=e.error,c=Object(s.b)(),i="";return Object(o.useEffect)((function(){console.log("************************useEffect/////////"),n||c(ge(i))}),[c]),t&&!n?r.a.createElement("div",null,"\ub85c\ub529\uc911..."):a?r.a.createElement("div",null,"\uc5d0\ub7ec \ubc1c\uc0dd"):n?r.a.createElement(je,{onChange:function(e){console.log("handleChange"),i=e.target.value},onClick:function(e){console.log("handleClick"),c(ge(i))},movies:n}):r.a.createElement("div",null,"\ub370\uc774\ud130 \uc5c6\uc74c")};var Se=function(){return console.log("pages/MovieListPage"),r.a.createElement(ke,null)},Ce=t(49),Ie=t.n(Ce),Le=t(50),Ne=t.n(Le);function _e(){var e=Object(i.a)(["\n  padding: 0;\n  margin: 10px;\n  width: 230px;\n  height: 49px;\n  line-height: 49px;\n  color: #3c1e1e;\n  background-color: white;\n  border: 1px solid #ced4da;\n  border-radius: 5px;\n  font-size: 16px;\n  cursor: pointer;\n"]);return _e=function(){return e},e}function Te(){var e=Object(i.a)(["\n  padding: 0;\n  margin: 10px;\n  width: 230px;\n  height: 49px;\n  line-height: 49px;\n  color: #3c1e1e;\n  background-color: white;\n  border: 1px solid #ced4da;\n  border-radius: 5px;\n  font-size: 16px;\n  cursor: pointer;\n"]);return Te=function(){return e},e}function Me(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return Me=function(){return e},e}var De=u.b.div(Me()),Re=Object(u.b)(Ne.a)(Te()),Ge=u.b.button(_e());var Pe=function(e){var n=e.responseGoogle,t=e.responseKakao,o=e.responseFail;return console.log("components/Login"),r.a.createElement(De,null,r.a.createElement(ye.a,{to:"/",className:"homeLink"},r.a.createElement("span",{className:"homeTitle"},"BOX OFFICE")),r.a.createElement(Ie.a,{clientId:"822311017221-vqnjoe6mjbljr9cp1dvoeahjil2mhh9v.apps.googleusercontent.com",render:function(e){return r.a.createElement(Ge,{onClick:e.onClick,disabled:e.disabled},"\uad6c\uae00\ub85c \uc2dc\uc791")},onSuccess:n,onFailure:o}),r.a.createElement(Re,{jsKey:"09cacdaaabf08e5b95d7d9c603f1361b",buttonText:"\uce74\uce74\uc624\ub85c \uc2dc\uc791",onSuccess:t,onFailure:o}))};var Be=function(){console.log("containers/LoginContainer");var e=Object(s.b)();Object(o.useEffect)((function(){return e(de(!1)),function(){e(de(!0))}}),[e]);var n=function(n,t){window.sessionStorage.setItem("provider",n),e(ue()),e(pe(n,t))};return r.a.createElement(Pe,{responseGoogle:function(e){console.log(e),n("google",e.googleId)},responseKakao:function(e){console.log(e),window.Kakao.API.request({url:"/v2/user/me",success:function(e){console.log(e),n("kakao",e.id)},fail:function(e){console.log(e)}})},responseFail:function(e){console.error(e)}})};var Ae=function(e){return console.log("pages/LoginPage"),console.log(e),r.a.createElement(Be,null)};t(92);var Ye=function(e){var n=e.loginStatus,t=e.onLogin,o=e.onLogout;return console.log("components/Header"),r.a.createElement("div",{className:"header"},n?r.a.createElement(ye.a,{to:"/",className:"loginLink"},r.a.createElement("button",{className:"loginButton",onClick:o},"\ub85c\uadf8\uc544\uc6c3")):r.a.createElement(ye.a,{to:"/login",className:"loginLink",state:{test:window.location.pathname}},r.a.createElement("button",{className:"loginButton",onClick:t},"\ub85c\uadf8\uc778 / \uac00\uc785")),r.a.createElement(ye.a,{to:"/",className:"homeLink"},r.a.createElement("h1",{className:"homeTitle"},"BOX OFFICE")))};var Ke=function(){console.log("/containers/HeaderContainer");var e=Object(s.c)((function(e){return e.movies})).visible,n=Object(s.c)((function(e){return e.movies.login})),t=n.status,a=n.provider,c=n.id,i=Object(s.b)();return Object(o.useEffect)((function(){if(!t){var e=window.sessionStorage.getItem("provider");if(e)if(c)i(pe(e,c));else{var n=null;if("kakao"===e)window.Kakao.hasOwnProperty("Auth")||window.Kakao.init("09cacdaaabf08e5b95d7d9c603f1361b"),window.Kakao.Auth.getStatusInfo((function(t){n=t.user.id,i(pe(e,n))}));else if(window.gapi.hasOwnProperty("auth2"))window.gapi.auth2.getAuthInstance().signOut(),console.log("\uad6c\uae00 \ub85c\uadf8\uc544\uc6c3 \uc131\uacf5"),i(me()),window.sessionStorage.clear();else window.gapi.load("auth2",(function(){window.gapi.auth2.init({client_id:"822311017221-vqnjoe6mjbljr9cp1dvoeahjil2mhh9v.apps.googleusercontent.com"})}))}}}),[i,c,t]),e?r.a.createElement(Ye,{loginStatus:t,onLogout:function(){(console.log("onLogout"),"kakao"===a)?(window.Kakao.Auth.logout(),console.log("\uce74\uce74\uc624 \ub85c\uadf8\uc544\uc6c3 \uc131\uacf5"),i(me()),window.sessionStorage.clear()):(window.gapi.auth2.getAuthInstance().signOut(),console.log("\uad6c\uae00 \ub85c\uadf8\uc544\uc6c3 \uc131\uacf5"),i(me()),window.sessionStorage.clear())}}):null};function Fe(){var e=Object(i.a)(["\n  flex-direction: column;\n  box-sizing: border-box;\n  padding: 30px;\n  align-items: center;\n  justify-content: center;\n"]);return Fe=function(){return e},e}function Ve(){var e=Object(i.a)(["\n  body {\n    background-color: #eff3f7\n  }\n    "]);return Ve=function(){return e},e}var Ue=Object(u.a)(Ve()),ze=u.b.div(Fe()),He=function(){return console.log("App"),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,null),r.a.createElement(ze,null,r.a.createElement(Ke,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",component:Se,exact:!0}),r.a.createElement(l.a,{path:"/login",component:Ae}),r.a.createElement(l.a,{path:"/:rank",component:we}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var We=t(16);console.log("modules/index");var qe=Object(We.combineReducers)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,n=arguments.length>1?arguments[1]:void 0;switch(console.log("modules/movies"),n.type){case X:return Q({},e,{visible:n.visible});case Z:return Q({},e,{login:{status:!1,id:null,type:null}});case $:return Q({},e,{login:{status:!0,id:n.id,provider:n.provider}});case ee:case ne:return Q({},e,{login:{status:!1,id:null}});case te:return Q({},e,{visible:!0,movies:{loading:!0,data:null,error:null,date:n.date}});case oe:return Q({},e,{visible:!0,movies:{loading:!1,data:n.payload,error:null,date:n.date}});case re:return Q({},e,{visible:!0,movies:{loading:!1,data:null,error:n.error,date:n.date}});case ae:return Q({},e,{movie:{loading:!0,data:null,error:null}});case ce:return Q({},e,{movie:{loading:!1,data:e.movies.data.find((function(e){return e.rank===n.rank})),error:null},comment:[]});case ie:return Q({},e,{movie:{loading:!1,data:null,error:n.error}});case le:return Q({},e,{comment:n.payload});case se:return Q({},e,{comment:null});default:return e}}}),Je=t(51),Qe=t.n(Je),Xe=t(52),Ze=t(53),$e=t(8);console.log("index1");var en=Object($e.a)({basename:"pgg-dev.github.io/boxoffice"}),nn=Object(We.createStore)(qe,Object(Xe.composeWithDevTools)(Object(We.applyMiddleware)(Ze.a.withExtraArgument({history:en}),Qe.a)));console.log("index2"),c.a.render(r.a.createElement(l.b,{history:en},r.a.createElement(s.a,{store:nn},r.a.createElement(He,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[57,1,2]]]);
//# sourceMappingURL=main.52d1fd40.chunk.js.map